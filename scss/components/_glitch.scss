//TODO: make it less chaotic, easier to watch
//TODO: update clip to clip-path for better support (and probs visuals)

//mixin for copy of our text
@mixin glitchCopy{
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.glitch{
    position: relative;
    color: white;;
	font-size: 4em;

    animation: glitch-skew .9s infinite linear alternate-reverse;

    &::before{
        @include glitchCopy;
        left: 2px;
		text-shadow: -2px 0 #ff00c1;

        //mask to show only part of the glitch
		clip: rect(44px, 450px, 56px, 0);

		animation: glitch-anim1 4.9s infinite linear alternate-reverse;
    }

    &::after{
        @include glitchCopy;
		left: -2px;
		text-shadow: -2px 0 #00fff9, 2px 2px #ff00c1;
		animation: glitch-anim2 1.1s infinite linear alternate-reverse;
    }
}

//skewing animation for maint text
@keyframes glitch-skew{
    $steps: 5;
    @for $i from 0 through $steps{
        #{percentage($i * (1 / $steps))}{
            transform: skew((random(6) - 3) + deg);
        }
    }
}

//first glitch animation for copy
@keyframes glitch-anim1{
    $steps: 10;
    @for $i from 0 through $steps{
        #{percentage($i * (1 / $steps))}{
            clip: rect(random(100) + px, 9999px, random(100) + px, 0);
			transform: skew((random(100) / 100) + deg);
        }
    }
}

//second glitch animation for copy, same as the first, but for more random
@keyframes glitch-anim2{
    $steps: 10;
    @for $i from 0 through $steps{
        #{percentage($i * (1 / $steps))}{
            clip: rect(random(100) + px, 9999px, random(100) + px, 0);
			transform: skew((random(100) / 100) + deg);
        }
    }
}
